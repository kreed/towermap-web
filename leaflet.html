<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>T-Mobile band 12 comparison</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='leaflet.js'></script>
<script src='tmo.js'></script>
<link href='leaflet.css' rel='stylesheet' />
<style>
#map {
	position: absolute;
	top: 40px;
	left: 0;
	right: 0;
	bottom: 0;
}
#range {
	width: 100%;
}
</style>
</head>
<body>
<div id='map'></div>
<input id='range' type='range' min='0' max='1.0' step='any' />
<script>
var map = L.map('map');
var opts = { minZoom: 5, maxNativeZoom: 13 };
var right = L.tileLayer('tiles/1450750349/b12/{z}/{x}/{y}.png', opts).addTo(map);
var left = L.tileLayer('tiles/1450750349/nob12/{z}/{x}/{y}.png', opts).addTo(map);
L.tileLayer('//{s}.tiles.mapbox.com/v4/pdgoodman.2e9b9266/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoia3JlM2QiLCJhIjoiMEpxSWVyQSJ9.6ZjZOcJ0fivmTomvkBKbaw').addTo(map);
map.setView([29.4200, -98.4910], 13);

L.geoJson(towers, {
	pointToLayer: function (feature, latlng) {
		var bands = (feature.properties['band'] || "").split(';');
		var color = 0;
		if (bands.indexOf('2') >= 0) color = color | 0x0000ff;
		if (bands.indexOf('4') >= 0) color = color | 0x00ff00;
		if (bands.indexOf('12') >= 0) color = color | 0xff0000;
		var opts = {color: '#' + ('000000' + color.toString(16)).substr(-6), opacity: 1, radius: 8};
		return L.circleMarker(latlng, opts);
	},
	filter: function(feature, layer) {
		return feature.properties.hidden!='yes';
	}
}).addTo(map);

var range = document.getElementById('range');

function clip() {
	var nw = map.containerPointToLayerPoint([0, 0]),
			se = map.containerPointToLayerPoint(map.getSize()),
			clipX = nw.x + (se.x - nw.x) * range.value;

	left.getContainer().style.clip = 'rect(' + [nw.y, clipX, se.y, nw.x].join('px,') + 'px)';
	right.getContainer().style.clip = 'rect(' + [nw.y, se.x, se.y, clipX].join('px,') + 'px)';
}

range['oninput' in range ? 'oninput' : 'onchange'] = clip;
map.on('move', clip);

clip();
</script>
</body>
</html>
